{{ define "innerHTML" }}
<h1 class="uk-heading-small uk-text-center">{{ .Garden.Name }}</h1>
<div uk-grid>
    {{ range .Items }}
    {{ template "ZoneCard" . }}
    {{ end }}
</div>
{{ end }}

{{ define "ZoneCard" }}
<div class="uk-width-1-2@m" id="zone-card-{{ .ID }}">
    <div class="uk-card uk-card-default" style="margin: 5%;">
        <div class="uk-card-header uk-text-center">
            <h3 class="uk-card-title uk-margin-remove-bottom">
                <a href="/gardens/{{ .GardenID }}/zones/{{ .ID }}/history?limit=10&range=720h">{{ .Name }}</a>
            </h3>
        </div>
        <div class="uk-card-body">
            <div>
                <span uk-icon="clock" uk-tooltip="Start Time"></span> Watering for
                <span class="uk-text-primary">{{.NextWater.Duration}}</span>
                {{FormatUpcomingDate .NextWater.Time}}
            </div>

            {{ if .NextWater.Message }}
            <div class="uk-alert-danger uk-alert" uk-alert>
                <p class="uk-text-danger">{{ .NextWater.Message }}</p>
            </div>
            {{ end }}
        </div>
        <div class="uk-card-footer">
            <div uk-grid>
                <div class="uk-width-1-4@s">
                    {{ template "deleteButton" . }}
                </div>
                <div class="uk-width-1-2@s">
                    <form class="uk-form-horizontal" hx-headers='{"Accept": "text/html"}'
                        hx-post="/gardens/{{ .GardenID }}/zones/{{ .ID }}/action" hx-on::after-request="this.reset()"
                        hx-swap="none">
                        <input class="uk-input uk-form-width-small" type="text" placeholder="Duration"
                            name="water.duration">
                        <button class="uk-button uk-button-default uk-margin-left">Water
                            Zone</button>
                    </form>
                </div>
                <div class="uk-width-1-4@s uk-text-right">
                    {{ template "infoPopover" . }}
                </div>
            </div>
        </div>
    </div>
</div>
{{ end }}

{{ define "deleteButton" }}
<div class="uk-inline">
    <button class="uk-button uk-button-danger" type="button"><span uk-icon="trash"></span></button>
    <div uk-dropdown>
        <ul class="uk-nav uk-dropdown-nav">
            <li>
                <a hx-delete="/gardens/{{ .GardenID }}/zones/{{ .ID }}" hx-swap="swap:1s"
                    hx-target="#zone-card-{{ .ID }}">
                    <span uk-icon="ban"></span> Confirm Delete
                </a>
            </li>
        </ul>
    </div>
</div>
{{ end }}

{{ define "infoPopover" }}
<div class="uk-inline">
    <span class="uk-margin-small-right" uk-icon="info"></span>
    <div uk-dropdown>
        <p><b>{{ .ID }}</b></p>
        <p>Position: {{ .Position }}</p>
        <p>Water Schedules: {{ .WaterScheduleIDs }}</p>
    </div>
</div>
{{ end }}