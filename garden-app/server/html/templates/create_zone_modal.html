{{ define "CreateZoneModal" }}
<div id="modal" class="uk-modal" style="display:block;">
    <div class="uk-modal-dialog uk-modal-body">
        <h3 class="uk-modal-title">Create Zone</h3>

        <form _="on submit take .uk-open from #modal" hx-post="/gardens/{{ .Garden.ID }}/zones"
            hx-headers='{"Accept": "text/html"}'>

            <div class="uk-grid-small" uk-grid>
                <div class="uk-width-2-3@s">
                    <input class="uk-input" name="Name" placeholder="Name">
                </div>
                <div class="uk-width-1-3@s">
                    <select class="uk-select" name="Position">
                        {{ range .Positions }}
                        <option value="{{ . }}">{{ . }}</option>
                        {{ end }}
                    </select>
                </div>
            </div>

            <div class="uk-margin">
                <input class="uk-input" name="Details.Description" placeholder="Description">
            </div>

            <div class="uk-margin">
                <input class="uk-input" name="Details.Notes" placeholder="Notes">
            </div>

            <!-- TODO: fix issue where page doesn't work after closing modal-->
            <div class="uk-margin uk-child-width-auto uk-grid">
                {{ range $index, $ws := .WaterSchedules }}
                {{ $name := .Name }}
                {{ if eq $name "" }}
                {{ $name = .ID }}
                {{ end }}
                <div class="uk-width-1-2@m">
                    <label>
                        <div class="uk-inline">
                            <input class="uk-checkbox" type="checkbox" name="WaterScheduleIDs.{{ $index }}"
                                value="{{ $ws.ID }}"> {{ $name }}
                            <span class="uk-margin-small-right" uk-icon="icon: info; ratio: 0.75"></span>
                            <div uk-dropdown="pos: right-center">
                                {{ template "waterScheduleDetails" $ws }}
                            </div>
                        </div>
                    </label>
                </div>
                {{ end }}
            </div>

            <button type="submit" class="uk-button uk-button-primary">Submit</button>
            <button id="cancelButton" type="button" class="uk-button uk-button-default"
                _="on click take .uk-open from #modal wait 200ms then remove #modal">Close</button>
        </form>
    </div>
</div>
{{ end }}